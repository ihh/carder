<html>
  <head>
    <title>Carder</title>
    <link rel="stylesheet" href="css/carder.css"></link>
    <link rel="stylesheet" href="css/plain.css"></link>
    <link rel="stylesheet" href="css/portrait.css"></link>
    <link rel="stylesheet" href="css/landscape.css"></link>
    <link rel="stylesheet" href="css/desktop.css"></link>
    <script src="js/jquery-3.5.1.min.js"></script>
    <script src="js/swing.js"></script>
    <script src="js/carder.js"></script>
  </head>
  <body>
    <div id="carder"/>
    <script>
      let c
      $(document).ready (() => {
	c = new Carder ({ parent: "carder" })
	let coins = 0.5, castle = 0.5
	c.addMeter ({ name: 'coins', icon: 'meters/coins.svg', level: () => coins })
	c.addMeter ({ name: 'castle', icon: 'meters/castle.svg', level: () => castle })
	function deal (message) {
	  message = message || '<i>Demo card</i>'
	  c.dealCard ({ html: message,
			left: {
			  hint: 'left',
			  preview: "I'm swiping left.",
			  cb: () => { coins *= .9; deal ('You swiped left') }
			},
			right: {
			  hint: 'right',
			  preview: "I'm swiping right.",
			  cb: () => { castle = 1 - (1 - castle) * .9; deal ('You swiped right') }
			}
                      })
	}
//	deal()
	c.stackDiv.append ($('<div class="card jiggle dragging" style="transform: translate(655px, 420px);"><div class="inner">Dummy card</div></div>'))
      })
    </script>
  </body>
</html>
