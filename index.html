<html>
  <head>
    <title>Carder</title>
    <meta http-equiv="ScreenOrientation" content="autoRotate:disabled">
    <link rel="stylesheet" href="css/carder.css"></link>
    <link rel="stylesheet" href="css/plain.css"></link>
    <link rel="stylesheet" href="css/desktop.css"></link>
    <script src="js/jquery-3.5.1.min.js"></script>
    <script src="js/swing.js"></script>
    <script src="js/carder.js"></script>
  </head>
  <body>
    <div id="carder"/>
    <script>
      let c, coins = 0.5, castle = 0.5
      $(document).ready (() => {
	c = new Carder ({ parent: "carder" })
	c.addMeter ({ name: 'coins', icon: 'meters/coins.svg', level: () => coins })
	c.addMeter ({ name: 'castle', icon: 'meters/castle.svg', level: () => castle })
	function deal (message) {
	  message = message || '<i>Demo card</i>'
	  c.dealCard ({ html: message,
			left: {
			  hint: 'left',
			  preview: "I'm swiping left.",
			  meters: { coins: -1 },
			  cb: () => { coins *= .9; deal ('You swiped left') }
			},
			right: {
			  hint: 'right',
			  preview: "I'm swiping right.",
			  meters: { castle: +1 },
			  cb: () => { castle = 1 - (1 - castle) * .9; deal ('You swiped right') }
			}
                      })
	}
//	deal()
	let msg = ''; for (let n = 1; n <= 100; ++n) msg += ' long text ' + n; deal(msg)
      })
    </script>
  </body>
</html>
